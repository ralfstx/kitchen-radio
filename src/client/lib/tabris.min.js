/*!
 * tabris.js 2014-11-13
 *
 * Copyright (c) 2014 EclipseSource.
 * All rights reserved.
 */
util={extend:function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a},pick:function(a,b){var c={};for(var d in a)-1!==b.indexOf(d)&&(c[d]=a[d]);return c},omit:function(a,b){var c={};for(var d in a)-1===b.indexOf(d)&&(c[d]=a[d]);return c},clone:function(a){var b={};for(var c in a)b[c]=a[c];return b},rename:function(a,b){var c={};for(var d in a)c[b[d]||d]=a[d];return c},invert:function(a){var b={};for(var c in a)b[a[c]]=c;return b},bind:function(a,b){return function(){return a.apply(b,arguments)}},extendPrototype:function(a,b){var c=function(){};return c.prototype=a.prototype,util.extend(new c,b,{"super":function(b){return a.prototype[b].apply(this,Array.prototype.slice.call(arguments,1))},Super:function(){a.apply(this,arguments)}})}},function(){util.colorArrayToString=function(a){var b=a[0],c=a[1],d=a[2],e=3===a.length?1:Math.round(100*a[3]/255)/100;return"rgba("+b+", "+c+", "+d+", "+e+")"},util.colorStringToArray=function(b){if(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/.test(b))return[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),255];if(/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/.test(b))return[17*parseInt(RegExp.$1,16),17*parseInt(RegExp.$2,16),17*parseInt(RegExp.$3,16),255];if(/^rgb\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*\)$/.test(b))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),255];if(/^rgba\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?([0-9]*\.)?[0-9]+)\s*\)$/.test(b))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),Math.round(255*Math.max(0,Math.min(1,parseFloat(RegExp.$4))))];if(b in a){var c=a[b];return[c[0],c[1],c[2],255]}throw new Error("invalid color: "+b)};var a={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]}}(),function(){util.fontStringToArray=function(d){var e=[[],0,!1,!1],f=d.split(/(?:\s|^)\d+px(?:\s|$)/);return c(2===f.length||1===f.length,"Invalid font syntax"),e[1]=parseInt(/(?:\s|^)(\d+)px(?:\s|$)/.exec(d)[1],10),a(e,f[0]),b(e,f[1]),e},util.fontArrayToString=function(a){return(a[3]?"italic ":"")+(a[2]?"bold ":"")+(a[1]+"px")+(a[0][0]?" ":"")+a[0].join(", ")};var a=function(a,b){var d=b.trim().split(/\s+/);c(d.length<=2,"Too many font styles"),d.forEach(function(b){switch(b.trim()){case"italic":c(a[3]===!1,"Invalid font variant"),a[3]=!0;break;case"bold":c(a[2]===!1,"Invalid font weight"),a[2]=!0;break;case"normal":case"":break;default:throw new Error("Unknown font property: "+b.trim())}})},b=function(a,b){(b?b.split(","):[]).forEach(function(b){var d=/(?:^\s*[^\"\']+\s*$)|(?:^\s*\"[^\"\']+\"\s*$)|(?:^\s*\'[^\"\']+\'\s*$)/.exec(b);c(d,"Invalid font family: "+b),a[0].push(/^\s*[\"\']?([^\"\']*)/.exec(b)[1].trim())})},c=function(a,b){if(!a)throw new Error(b)}}(),function(){function a(a){return null!=a?a:null}util.imageToArray=function(b){return[b.src,a(b.width),a(b.height),a(b.scale)]},util.imageFromArray=function(a){var b={src:a[0]};return a.length>1&&(b.width=a[1]),a.length>2&&(b.height=a[2]),a.length>3&&(b.scale=a[3]),b}}(),function(){function a(a){var c=b[a];return c instanceof Object?util.clone(c):c}tabris=util.extend(function(a){if(!tabris._proxies[a]&&!tabris[a])throw new Error("No native object with id or type "+a);var b=tabris[a]&&tabris[a]._type?tabris[a]._type:a;return b in tabris._proxies?tabris._proxies[b]:new tabris[a](b)},{_loadFunctions:[],_proxies:{},load:function(a){tabris._loadFunctions.push(a)},create:function(a,b){if(!tabris._nativeBridge)throw new Error("tabris.js not started");if(!(a in tabris))throw new Error("Unknown type "+a);return(new tabris[a])._create(b)},registerType:function(c,d){if(c in tabris)throw new Error("Type already registered: "+c);tabris[c]=function(){tabris.Proxy.apply(this,arguments)};for(var e in b)tabris[c][e]=d[e]||a(e);var f=util.omit(d,Object.keys(b));f.type=c,f.constructor=tabris[c],tabris[c].prototype=util.extendPrototype(tabris.Proxy,f)},_start:function(a){tabris._nativeBridge=new tabris.NativeBridge(a);for(var b=0;b<tabris._loadFunctions.length;)tabris._loadFunctions[b++].call();tabris.trigger("flush")},_notify:function(a,b,c){var d=tabris._proxies[a];d&&d._trigger(b,c),tabris.trigger("flush")},_reset:function(){this._loadFunctions=[],this._proxies={}}});var b={_trigger:{},_listen:{},_setProperty:{},_getProperty:{},_properties:{},_type:null,_checkProperty:{},_supportsChildren:!1}}(),function(){tabris.NativeBridge=function(a){this._bridge=a,this.V8=!!a.V8,this._operations=[],this._currentOperation={id:null},tabris.on("flush",this.flush,this)},tabris.NativeBridge.prototype={create:function(a,b){var c={};this._operations.push(["create",a,b,c]),this._currentOperation={id:a,properties:c}},set:function(a,b,c){if(this._currentOperation.id===a)this._currentOperation.properties[b]=c;else{var d={};d[b]=c,this._operations.push(["set",a,d]),this._currentOperation={id:a,properties:d}}},listen:function(a,b,c){this._operations.push(["listen",a,b,c]),this._currentOperation={id:null}},destroy:function(a){this._operations.push(["destroy",a]),this._currentOperation={id:null}},get:function(a,b){return this._operations.push(["get",a,b]),this.flush()},call:function(a,b,c){return this._operations.push(["call",a,b,c]),this.flush()},flush:function(){var a=this._operations;this._operations=[],this._currentOperation={id:null};for(var b=a.length,c=0;b>c;c++){var d=a[c];switch(d[0]){case"create":this._bridge.create(d[1],d[2],d[3]);break;case"set":this._bridge.set(d[1],d[2]);break;case"listen":this._bridge.listen(d[1],d[2],d[3]);break;case"destroy":this._bridge.destroy(d[1]);break;case"get":return this._bridge.get(d[1],d[2]);case"call":return this._bridge.call(d[1],d[2],d[3])}}}}}(),tabris.Events={on:function(a,b,c){this._callbacks||(this._callbacks=[]);var d=this._callbacks[a]||(this._callbacks[a]=[]);return d.push({fn:b,ctx:c}),this},off:function(a,b,c){if(this._callbacks)if(a){if(a in this._callbacks)if(b){for(var d=this._callbacks[a],e=d.length-1;e>=0;e--)d[e].fn!==b||c&&d[e].ctx!==c||d.splice(e,1);0===d.length&&(delete this._callbacks[a],0===Object.keys(this._callbacks).length&&delete this._callbacks)}else delete this._callbacks[a]}else delete this._callbacks;return this},trigger:function(a){if(this._callbacks&&a in this._callbacks)for(var b=this._callbacks[a],c=Array.prototype.slice.call(arguments,1),d=0;d<b.length;d++){var e=b[d];e.fn.apply(e.ctx||this,c)}return this},_isListening:function(a){return!!this._callbacks&&(!a||a in this._callbacks)}},util.extend(tabris,tabris.Events),function(){function a(a){return util.colorStringToArray(a)}function b(a){return util.fontStringToArray(a)}function c(a){return util.fontArrayToString(a)}function d(a){return util.imageToArray(a)}function e(a){return util.imageFromArray(a)}function f(a){return{left:a[0],top:a[1],width:a[2],height:a[3]}}function g(a){return a.map(function(a){return null==a?null:util.imageToArray(a)})}function h(a){return a.map(function(a){return null==a?null:util.imageFromArray(a)})}function i(a){if("centerX"in a){if("left"in a||"right"in a)return console.warn("Inconsistent layoutData: centerX overrides left and right"),util.omit(a,["left","right"])}else"left"in a||"right"in a||console.warn("Incomplete layoutData: either left, right or centerX should be specified");if("baseline"in a){if("top"in a||"bottom"in a||"centerY"in a)return console.warn("Inconsistent layoutData: baseline overrides top, bottom, and centerY"),util.omit(a,["top","bottom","centerY"])}else if("centerY"in a){if("top"in a||"bottom"in a)return console.warn("Inconsistent layoutData: centerY overrides top and bottom"),util.omit(a,["top","bottom"])}else"top"in a||"bottom"in a||console.warn("Incomplete layoutData: either top, bottom, centerY, or baseline should be specified");return a}function j(a){var b={};for(var c in a)b[c]=Array.isArray(a[c])?a[c].map(l):l(a[c]);return b}function k(a){return[a.left,a.top,a.width,a.height]}function l(a){return a instanceof tabris.Proxy?a.id:a}function m(a){return util.colorArrayToString(a)}function n(){return"o"+o++}tabris.Proxy=function(a){this.id=a||n(),tabris._proxies[this.id]=this},util.extend(tabris.Proxy.prototype,tabris.Events,{_create:function(a){var b=this.constructor._type||this.type;return tabris._nativeBridge.create(this.id,b),this._setProperties(util.extend({},this.constructor._properties,a)),this},append:function(){this._checkDisposed();for(var a=0;a<arguments.length;a++){if(!(arguments[a]instanceof tabris.Proxy))throw new Error("Cannot append non-widget");arguments[a]._setParent(this)}return this},appendTo:function(a){if(this._checkDisposed(),!(a instanceof tabris.Proxy))throw new Error("Cannot append to non-widget");return this._setParent(a),this},get:function(a){return this._checkDisposed(),this._getProperty(a)},set:function(a,b){return this._checkDisposed(),"string"==typeof a?this._setProperty(a,b):this._setProperties(a),this},animate:function(a,b){tabris.Animation.animate(this,a,b)},call:function(a,b){return this._checkDisposed(),tabris._nativeBridge.call(this.id,a,b)},on:function(a,b,c){this._checkDisposed();var d=this._isListening(a);return tabris.Events.on.call(this,a,b,c),d||this._listen(a,!0),this},off:function(a,b,c){return this._checkDisposed(),tabris.Events.off.call(this,a,b,c),this._isListening(a)||this._listen(a,!1),this},dispose:function(){this._isDisposed||(this._destroy(),tabris._nativeBridge.destroy(this.id),this._parent&&this._parent._removeChild(this),this._isDisposed=!0)},parent:function(){return this._parent},children:function(){return this._children?Array.prototype.slice.call(this._children):[]},_listen:function(a,b){var c=this.constructor&&this.constructor._listen&&this.constructor._listen[a];c?"string"==typeof c?this._nativeListen(c,b):c instanceof Function?c.call(this,b):this._nativeListen(a,b):console.info(this.type+": Unknown event type "+a)},_nativeListen:function(a,b){tabris._nativeBridge.listen(this.id,a,b)},_trigger:function(a,b){var c=this.constructor&&this.constructor._trigger&&this.constructor._trigger[a];c instanceof Function?c.call(this,b):"string"==typeof c?this.trigger(c,b):this.trigger(a,b)},_destroy:function(){this.trigger("dispose",{}),this._destroyChildren(),tabris.Events.off.call(this),delete tabris._proxies[this.id]},_destroyChildren:function(){if(this._children)for(var a=0;a<this._children.length;a++)this._children[a]._destroy()},_addChild:function(a){var b=this.constructor&&this.constructor._supportsChildren;if(b===!1)throw new Error(this.type+" cannot contain children");if("function"==typeof b&&!b(a))throw new Error(this.type+" cannot contain children of type "+a.type);this._children||(this._children=[]),this._children.push(a)},_removeChild:function(a){if(this._children){var b=this._children.indexOf(a);-1!==b&&this._children.splice(b,1)}},_checkDisposed:function(){if(this._isDisposed)throw new Error("Object is disposed")},_setProperties:function(a){for(var b in a)this._setProperty(b,a[b])},_setProperty:function(a,b){this._checkProperty(a,b);var c=this.constructor&&this.constructor._setProperty&&this.constructor._setProperty[a];try{var d=this._encodeProperty(a,b);c instanceof Function?c.call(this,b):this._setNativeProperty(a,d)}catch(e){console.warn("Unsupported "+a+" value: "+e.message)}},_checkProperty:function(a){var b=this.constructor&&this.constructor._checkProperty&&this.constructor._checkProperty[a];b||this.constructor._checkProperty===!0||console.warn(this.type+': Unknown property "'+a+'"')},_setNativeProperty:function(a,b){tabris._nativeBridge.set(this.id,a,b)},_getProperty:function(a){this._checkProperty(a);var b=this.constructor&&this.constructor._getProperty&&this.constructor._getProperty[a],c=b?b.call(this):this._getNativeProperty(a);return this._decodeProperty(a,c)},_getNativeProperty:function(a){return tabris._nativeBridge.get(this.id,a)},_encodeProperty:function(c,e){switch(c){case"foreground":case"background":return a(e);case"font":return b(e);case"image":case"backgroundImage":return d(e);case"images":return g(e);case"layoutData":return j(i(e));case"bounds":return k(e)}return l(e)},_getContainer:function(){return this},_setParent:function(a){tabris._nativeBridge.set(this.id,"parent",l(a._getContainer())),this._parent&&this._parent._removeChild(this),this._parent=a,this._parent._addChild(this)},_decodeProperty:function(a,b){switch(a){case"foreground":case"background":return m(b);case"font":return c(b);case"image":case"backgroundImage":return e(b);case"bounds":return f(b);case"images":return h(b)}return b}});var o=1}(),function(){tabris.registerWidget=function(a,b){b=util.clone(b),b._listen=util.extend({},tabris.registerWidget._defaultListen,b._listen||{}),b._trigger=util.extend({},tabris.registerWidget._defaultTrigger,b._trigger||{}),b._checkProperty!==!0&&(b._checkProperty=util.extend({},tabris.registerWidget._defaultCheckProperty,b._checkProperty||{})),tabris.registerType(a,b)},util.extend(tabris.registerWidget,{_defaultListen:{touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,longpress:!0,dispose:function(){},"change:bounds":"Resize"},_defaultTrigger:{Resize:"change:bounds"},_defaultCheckProperty:{enabled:!0,visibility:!0,layoutData:!0,font:!0,backgroundImage:!0,bounds:!0,background:!0,foreground:!0,opacity:!0,transform:!0,highlightOnTouch:!0}}),tabris.registerWidget("Button",{_type:"rwt.widgets.Button",_properties:{style:["PUSH"]},_listen:{selection:"Selection"},_trigger:{Selection:"selection"},_checkProperty:{alignment:!0,image:!0,text:!0,style:!0}}),tabris.registerWidget("Canvas",{_type:"rwt.widgets.Canvas",_supportsChildren:!0}),tabris.registerWidget("CheckBox",{_type:"rwt.widgets.Button",_properties:{style:["CHECK"]},_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_checkProperty:{text:!0,selection:!0,style:!0}}),tabris.registerWidget("Combo",{_type:"rwt.widgets.Combo",_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_checkProperty:{items:!0,text:!0,selectionIndex:!0}}),tabris.registerWidget("Composite",{_type:"rwt.widgets.Composite",_supportsChildren:!0}),tabris.registerWidget("ImageView",{_type:"tabris.ImageView",_checkProperty:{image:!0,scaleMode:!0}}),tabris.registerWidget("Label",{_type:"rwt.widgets.Label",_properties:{style:["WRAP"]},_checkProperty:{alignment:!0,markupEnabled:!0,text:!0,style:!0}}),tabris.registerWidget("ProgressBar",{_type:"rwt.widgets.ProgressBar",_checkProperty:{minimum:!0,maximum:!0,selection:!0,state:!0}}),tabris.registerWidget("RadioButton",{_type:"rwt.widgets.Button",_properties:{style:["RADIO"]},_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_checkProperty:{text:!0,selection:!0,style:!0}}),tabris.registerWidget("Slider",{_type:"rwt.widgets.Scale",_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_checkProperty:{minimum:!0,maximum:!0,selection:!0}}),tabris.registerWidget("Text",{_type:"rwt.widgets.Text",_create:function(b){var c=a[b.type]||a["default"];return this.super("_create",util.extend({style:c},b))},_listen:{focus:"FocusIn",blur:"FocusOut",accept:"DefaultSelection"},_trigger:{FocusIn:"focus",FocusOut:"blur",DefaultSelection:"accept"},_checkProperty:{type:!0,text:!0,message:!0,editable:!0,textLimit:!0,style:!0}});var a={password:["BORDER","SINGLE","PASSWORD"],search:["BORDER","SINGLE","SEARCH"],multiline:["BORDER","MULTI"],"default":["BORDER","SINGLE"]};tabris.registerWidget("ToggleButton",{_type:"rwt.widgets.Button",_properties:{style:["TOGGLE"]},_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_checkProperty:{text:!0,image:!0,selection:!0,alignment:!0,style:!0}}),tabris.registerWidget("Video",{_type:"tabris.widgets.Video",_properties:{controls_visible:!0,repeat:!1},_checkProperty:{url:!0}}),tabris.registerWidget("WebView",{_type:"rwt.widgets.Browser",_listen:{load:"Progress"},_trigger:{Progress:"load"},_checkProperty:{url:!0}})}(),tabris.registerType("_Animation",{_type:"tabris.Animation",_listen:{Completion:!0,Progress:!0,Start:!0},_checkProperty:!0}),tabris.Animation={validOptions:{delay:!0,duration:!0,repeat:!0,reverse:!0,easing:!0},animate:function(a,b,c){var d={};for(var e in c)this.validOptions[e]?d[e]=c[e]:console.warn('Invalid animation option "'+e+'"');tabris.create("_Animation",util.extend(d,{target:a,properties:b})).on("Completion",function(){this.dispose()}).call("start")}},function(){var a=function(){};tabris.DOMEvent=function(a,b){this.type=a,this.timeStamp=Date.now(),"undefined"!=typeof b&&("bubbles"in b&&(this.bubbles=b.bubbles),"cancelable"in b&&(this.cancelable=b.cancelable))},tabris.DOMEvent.prototype={NONE:0,CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,target:null,currentTarget:null,eventPhase:0,bubbles:!1,cancelable:!1,defaultPrevented:!1,isTrusted:!1,stopPropagation:a,stopImmediatePropagation:a,preventDefault:a},tabris._addDOMEventTargetMethods=function(a){if("function"!=typeof a.addEventListener){var b;a.addEventListener=function(a,c){b||(b=[]),a in b||(b[a]=[]);var d=b[a].indexOf(c);return-1===d&&b[a].push(c),1===b[a].length},a.removeEventListener=function(a,c){if(b&&a in b){var d=b[a].indexOf(c);if(-1!==d)return b[a].splice(d,1),0===b[a].length}return!1},a.dispatchEvent=function(a){if(b&&a.type in b)for(var c=b[a.type],d=0;d<c.length;d++)c[d].call(this,a)}}},"undefined"!=typeof window&&(tabris._addDOMEventTargetMethods(window),window.Event||(window.Event=tabris.DOMEvent))}(),function(){var a=function(){},b=function(){};b.prototype={setAttribute:a,appendChild:function(a){return a},cloneNode:function(){return new b},lastChild:function(){return new b}},tabris._addDOMDocument=function(a){a.document={documentElement:{},createDocumentFragment:function(){return new b},createElement:function(){return new b},location:{href:""}},tabris._addDOMEventTargetMethods(a.document),"undefined"==typeof a.location&&(a.location=a.document.location)},"undefined"==typeof window||window.document||tabris._addDOMDocument(window)}(),function(){tabris.registerType("_Timer",{_type:"tabris.Timer",_listen:{Run:!0},_checkProperty:!0}),tabris._addWindowTimerMethods=function(a){function b(a,b,e){var f=c++,g=tabris.create("_Timer",{delay:b,repeat:e}).on("Run",function(){a.call(),e||(g.dispose(),delete d[f])});return g.call("start"),d[f]=g,f}if("function"!=typeof a.setTimeout){var c=0,d={};a.setTimeout=function(a,c){return b(a,c,!1)},a.setInterval=function(a,c){return b(a,c,!0)},a.clearTimeout=a.clearInterval=function(a){var b=d[a];b&&(b.call("cancel",{}),b.dispose(),delete d[a])}}},"undefined"!=typeof window&&tabris._addWindowTimerMethods(window)}(),function(){tabris.registerType("_Device",{_type:"tabris.Device",_checkProperty:!0}),tabris._addDeviceMethods=function(a){"devicePixelRatio"in a||Object.defineProperty(a,"devicePixelRatio",{get:function(){return tabris("_Device").get("scaleFactor")},set:function(){}})},"undefined"!=typeof window&&tabris._addDeviceMethods(window)}(),tabris.registerType("_Display",{_type:"rwt.widgets.Display",_checkProperty:!0}),tabris.registerType("_Shell",{_type:"rwt.widgets.Shell",_listen:{Close:!0},_checkProperty:!0}),tabris.registerType("_UI",{_type:"tabris.UI",_listen:{ShowPage:!0,ShowPreviousPage:!0},_checkProperty:!0}),tabris.UIProxy=function(){this._pages=[]},tabris.UIProxy.prototype={_create:function(){var a=this;return tabris.create("_Display"),tabris._shell=tabris.create("_Shell",{style:["NO_TRIM"],mode:"maximized",active:!0,visibility:!0}),tabris._shell.on("Close",function(){tabris._shell.dispose()}),this._ui=tabris.create("_UI",{shell:tabris._shell}),this._ui.on("ShowPage",function(b){var c=tabris._proxies[b.pageId];a.setActivePage(c.widget)}),this._ui.on("ShowPreviousPage",function(){var b=a.getActivePage();b&&b.close()}),this},_install:function(a){a._uiProxy=this},setActivePage:function(a){this._pages.push(a),this._ui.set("activePage",a._page)},getActivePage:function(){return this._pages[this._pages.length-1]},restoreLastActivePage:function(){this._pages.pop();var a=this.getActivePage();a&&this._ui.set("activePage",a._page)}},tabris.load(function(){(new tabris.UIProxy)._create()._install(tabris)}),function(){tabris.registerWidget("CollectionView",{_type:"tabris.CollectionView",_checkProperty:{itemHeight:!0,items:!0,initializeCell:!0},_create:function(){var a=tabris.Proxy.prototype._create.apply(this,arguments);return this._nativeListen("createitem",!0),this._nativeListen("populateitem",!0),this._update(),a},set:function(){var a=tabris.Proxy.prototype.set.apply(this,arguments);return this._update(),a},_setProperty:{items:function(a){this._setItems(a)},initializeCell:function(a){this._initializeCell=a}},_getProperty:{items:function(){return this._items||[]}},_listen:{selection:!0},_trigger:{createitem:function(){var a=tabris.create("_CollectionCell",{});this.call("addItem",{widget:a.id}),"function"!=typeof this._initializeCell?console.warn("initializeCell callback missing"):this._initializeCell(a)},populateitem:function(a){var b=tabris(a.widget),c=this._items?this._items[a.index]:null;b.trigger("itemchange",c,a.index)},selection:function(a){this.trigger("selection",{index:a.index,item:this._items?this._items[a.index]:null})}},_setItems:function(a){var b=this._items?this._items.length:0;this._items=a;var c={};b>0&&(c.remove=[0,b]);var d=a?a.length:0;d>0&&(c.insert=[0,d]),Object.keys(c).length&&(this._updateOperations=c)},_update:function(){this._updateOperations&&(this.call("update",this._updateOperations),delete this._updateOperations)}}),tabris.registerWidget("_CollectionCell",{_type:"rwt.widgets.Composite",_listen:{itemchange:function(){}},_supportsChildren:!0,dispose:function(){console.warn("CollectionView cells are container-managed, they cannot be disposed of")}})}(),function(){tabris.registerWidget("_ScrollBar",{_type:"rwt.widgets.ScrollBar",_listen:{Selection:!0},_checkProperty:!0}),tabris.registerWidget("ScrollComposite",{_type:"rwt.widgets.ScrolledComposite",_supportsChildren:!0,_listen:{scroll:function(a){a?this._scrollBar.on("Selection",this._scrollBarListener,this):this._scrollBar.off("Selection",this._scrollBarListener,this)}},_checkProperty:{style:!0},_create:function(a){var b=util.omit(a,["scroll"]);return this.super("_create",util.extend(b,{style:"horizontal"===a.scroll?["H_SCROLL"]:["V_SCROLL"]})),this._scrollBar=tabris.create("_ScrollBar",{style:"horizontal"===a.scroll?["HORIZONTAL"]:["VERTICAL"]}),tabris._nativeBridge.set(this._scrollBar.id,"parent",this.id),this._composite=tabris.create("Composite"),tabris._nativeBridge.set(this._composite.id,"parent",this.id),this._setNativeProperty("content",this._composite.id),this},_scrollBarListener:function(){var a=this.get("origin");this.trigger("scroll",{x:a[0],y:a[1]})},_getContainer:function(){return this._composite}})}(),function(){var a=["title","image","style","topLevel"];tabris.registerType("_Page",{_type:"tabris.Page",_checkProperty:!0}),tabris.registerWidget("Page",{_type:"rwt.widgets.Composite",_supportsChildren:!0,_checkProperty:{image:!0,title:!0,topLevel:!0},_create:function(b){return this.super("_create",util.extend(util.omit(b,a),{layoutData:{left:0,right:0,top:0,bottom:0}})),this._setNativeProperty("parent",tabris._shell.id),this._page=tabris.create("_Page",util.extend(util.pick(b,a),{parent:tabris._uiProxy._ui,control:this})),this._page.widget=this,this},dispose:function(){this.super("dispose"),this._page.dispose()},open:function(){tabris._uiProxy.setActivePage(this)},close:function(){this.dispose(),tabris._uiProxy.restoreLastActivePage()}}),a.forEach(function(a){tabris.Page._setProperty[a]=function(b){this._page.set(a,b)},tabris.Page._getProperty[a]=function(){return this._page.get(a)}})}(),tabris.registerType("Action",{_type:"tabris.Action",_checkProperty:{enabled:!0,foreground:!0,image:!0,placementPriority:!0,title:!0,visibility:!0},_listen:{selection:"Selection"},_trigger:{Selection:function(a){this.trigger("selection",a)}},_create:function(a){return this.super("_create",a),this._setNativeProperty("parent",tabris._uiProxy._ui.id),this}}),function(){function a(a){return-1!==["title","image","badge"].indexOf(a)}function b(a){return"title"===a?"text":a}function c(a){return a instanceof tabris.Tab}function d(a){return!c(a)}tabris.registerType("_TabItem",{_type:"rwt.widgets.TabItem",_checkProperty:!0}),tabris.registerWidget("TabFolder",{_type:"rwt.widgets.TabFolder",_checkProperty:{paging:!0,selection:!0},_supportsChildren:function(a){return"Tab"===a.type||"_TabItem"===a.type},_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_setProperty:{paging:function(a){this._paging=a,this._setNativeProperty("data",{paging:a})},selection:function(a){this._setNativeProperty("selection",a._tabItem.id)}},_getProperty:{paging:function(){return!!this._paging},selection:function(){var a=this._getNativeProperty("selection");return a?tabris(a)._tab:null}},_getItems:function(){return this._children?this._children.filter(d):[]},children:function(){return this._children?this._children.filter(c):[]}}),tabris.registerWidget("Tab",{_type:"rwt.widgets.Composite",_checkProperty:{title:!0,image:!0,badge:!0},_supportsChildren:!0,_create:function(a){return this._itemProps={},this.super("_create",a)},_setProperty:{title:function(a){this._setItemProperty("text",a)},image:function(a){this._setItemProperty("image",a)},badge:function(a){this._setItemProperty("badge",a)}},_setItemProperty:function(a,b){this._tabItem?this._tabItem._setProperty(a,b):this._itemProps[a]=b},get:function(c){return a(c)?this._tabItem?this._tabItem.get(b(c)):this._itemProps[b(c)]:this.super("get",c)},_setParent:function(a){if(!(a instanceof tabris.TabFolder))throw new Error("Tab must be a child of TabFolder");this.super("_setParent",a),this._tabItem=tabris.create("_TabItem",util.extend({control:this.id,index:a._getItems().length},this._itemProps)).appendTo(a),this._tabItem._tab=this},_destroy:function(){this._tabItem&&this._tabItem.dispose()}})}(),function(){function a(a){return a}function b(a){if(a in this.values)return a;throw new Error(a)}function c(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function d(){var a={};for(var b in f)a[b]=f[b].init;return a}function e(a,b){var c=f[b];Object.defineProperty(a,b,{get:function(){return c.decode(a._state[b])},set:function(d){try{a._state[b]=c.encode(d),c.addOperations(a,a._state[b])}catch(e){console.warn("Unsupported value for "+b+": "+d)}}})}tabris.registerType("_GC",{_type:"rwt.widgets.GC",_listen:{dispose:function(){}},_checkProperty:{parent:!0}}),tabris.CanvasContext=function(a){this._gc=a,this._state=d(),this._savedStates=[],this._opCodes=[],this._newOpCodes=[],this._operations=[],this._ints=[],this._doubles=[],this._booleans=[],this._strings=[],this.canvas={width:0,height:0,style:{}};for(var b in f)e(this,b);tabris.on("flush",this._flush,this),a.on("dispose",function(){tabris.off("flush",this._flush,this)},this)},tabris.CanvasContext.prototype={save:function(){this._pushOperation("save"),this._savedStates.push(util.clone(this._state))},restore:function(){this._pushOperation("restore"),this._state=this._savedStates.pop()||this._state},beginPath:function(){this._pushOperation("beginPath")},closePath:function(){this._pushOperation("closePath")},lineTo:function(a,b){this._pushOperation("lineTo"),this._doubles.push(a,b)},moveTo:function(a,b){this._pushOperation("moveTo"),this._doubles.push(a,b)},bezierCurveTo:function(a,b,c,d,e,f){this._pushOperation("bezierCurveTo"),this._doubles.push(a,b,c,d,e,f)},quadraticCurveTo:function(a,b,c,d){this._pushOperation("quadraticCurveTo"),this._doubles.push(a,b,c,d)},rect:function(a,b,c,d){this._pushOperation("rect"),this._doubles.push(a,b,c,d)},arc:function(a,b,c,d,e,f){this._pushOperation("arc"),this._doubles.push(a,b,c,d,e),this._booleans.push(!!f)},scale:function(a,b){this._pushOperation("scale"),this._doubles.push(a,b)},rotate:function(a){this._pushOperation("rotate"),this._doubles.push(a)},translate:function(a,b){this._pushOperation("translate"),this._doubles.push(a,b)},transform:function(a,b,c,d,e,f){this._pushOperation("transform"),this._doubles.push(a,b,c,d,e,f)},setTransform:function(a,b,c,d,e,f){this._pushOperation("setTransform"),this._doubles.push(a,b,c,d,e,f)},clearRect:function(a,b,c,d){this._pushOperation("clearRect"),this._doubles.push(a,b,c,d)},fillRect:function(a,b,c,d){this._pushOperation("beginPath"),this._pushOperation("rect"),this._doubles.push(a,b,c,d),this.fill()},strokeRect:function(a,b,c,d){this._pushOperation("beginPath"),this._pushOperation("rect"),this._doubles.push(a,b,c,d),this.stroke()},fillText:function(a,b,c){this._pushOperation("fillText"),this._strings.push(a),this._booleans.push(!1,!1,!1),this._doubles.push(b,c)},strokeText:function(a,b,c){this._pushOperation("strokeText"),this._strings.push(a),this._booleans.push(!1,!1,!1),this._doubles.push(b,c)},fill:function(){this._pushOperation("fill")},stroke:function(){this._pushOperation("stroke")},measureText:function(a){return{width:5*a.length+5}},_init:function(a,b){this.canvas.width=a,this.canvas.height=b,this._gc.call("init",{width:a,height:b,font:[["sans-serif"],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})},_flush:function(){this._operations.length>0&&(this._gc.call("draw",{packedOperations:[this._newOpCodes,this._operations,this._doubles,this._booleans,this._strings,this._ints]}),this._operations=[],this._doubles=[],this._booleans=[],this._strings=[],this._ints=[],this._newOpCodes=[])},_pushOperation:function(a){this._opCodes.indexOf(a)<0&&(this._newOpCodes.push(a),this._opCodes.push(a)),this._operations.push(this._opCodes.indexOf(a))}},tabris.getContext=function(a,b,c){return a._gc||(a._gc=tabris.create("_GC",{parent:a})),a._ctx||(a._ctx=tabris._nativeBridge.V8?new tabris.CanvasContext(a._gc):new tabris.LegacyCanvasContext(a._gc)),a._ctx._init(b,c),a._ctx};var f={lineWidth:{init:1,encode:function(a){if(a>0)return a;throw new Error(a)},decode:a,addOperations:function(a,b){a._pushOperation("lineWidth"),a._doubles.push(b)}},lineCap:{init:"butt",values:c(["butt","round","square"]),encode:b,decode:a,addOperations:function(a,b){a._pushOperation("lineCap"),a._strings.push(b)}},lineJoin:{init:"miter",values:c(["bevel","miter","round"]),encode:b,decode:a,addOperations:function(a,b){a._pushOperation("lineJoin"),a._strings.push(b)}},fillStyle:{init:[0,0,0,255],encode:util.colorStringToArray,decode:util.colorArrayToString,addOperations:function(a,b){a._pushOperation("fillStyle"),a._ints.push(b[0],b[1],b[2],b[3])}},strokeStyle:{init:[0,0,0,255],encode:util.colorStringToArray,decode:util.colorArrayToString,addOperations:function(a,b){a._pushOperation("strokeStyle"),a._ints.push(b[0],b[1],b[2],b[3])}},textAlign:{init:"start",values:c(["start","end","left","right","center"]),encode:b,decode:a,addOperations:function(a,b){a._pushOperation("textAlign"),a._strings.push(b)}},textBaseline:{init:"alphabetic",values:c(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:b,decode:a,addOperations:function(a,b){a._pushOperation("textBaseline"),a._strings.push(b)}}}}(),function(){function a(a){return a}function b(a){if(a in this.values)return a;throw new Error(a)}function c(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function d(){var a={};for(var b in f)a[b]=f[b].init;return a}function e(a,b){var c=f[b];Object.defineProperty(a,b,{get:function(){return c.decode(a._state[b])},set:function(d){try{a._state[b]=c.encode(d),a._operations.push([b,this._state[b]])}catch(e){console.warn("Unsupported value for "+b+": "+d)}}})}tabris.LegacyCanvasContext=function(a){this._gc=a,this._state=d(),this._savedStates=[],this._operations=[],this.canvas={width:0,height:0,style:{}};for(var b in f)e(this,b);
tabris.on("flush",this._flush,this),a.on("dispose",function(){tabris.off("flush",this._flush,this)},this)},tabris.LegacyCanvasContext.prototype={save:function(){this._operations.push(["save"]),this._savedStates.push(util.clone(this._state))},restore:function(){this._operations.push(["restore"]),this._state=this._savedStates.pop()||this._state},beginPath:function(){this._operations.push(["beginPath"])},closePath:function(){this._operations.push(["closePath"])},lineTo:function(a,b){this._operations.push(["lineTo",a,b])},moveTo:function(a,b){this._operations.push(["moveTo",a,b])},bezierCurveTo:function(a,b,c,d,e,f){this._operations.push(["bezierCurveTo",a,b,c,d,e,f])},quadraticCurveTo:function(a,b,c,d){this._operations.push(["quadraticCurveTo",a,b,c,d])},rect:function(a,b,c,d){this._operations.push(["rect",a,b,c,d])},arc:function(a,b,c,d,e,f){this._operations.push(["arc",a,b,c,d,e,!!f])},scale:function(a,b){this._operations.push(["scale",a,b])},rotate:function(a){this._operations.push(["rotate",a])},translate:function(a,b){this._operations.push(["translate",a,b])},transform:function(a,b,c,d,e,f){this._operations.push(["transform",a,b,c,d,e,f])},setTransform:function(a,b,c,d,e,f){this._operations.push(["setTransform",a,b,c,d,e,f])},clearRect:function(a,b,c,d){this._operations.push(["clearRect",a,b,c,d])},fillRect:function(a,b,c,d){this._operations.push(["beginPath"],["rect",a,b,c,d]),this.fill()},strokeRect:function(a,b,c,d){this._operations.push(["beginPath"],["rect",a,b,c,d]),this.stroke()},fillText:function(a,b,c){this._operations.push(["fillText",a,!1,!1,!1,b,c])},strokeText:function(a,b,c){this._operations.push(["strokeText",a,!1,!1,!1,b,c])},fill:function(){this._operations.push(["fill"])},stroke:function(){this._operations.push(["stroke"])},measureText:function(a){return{width:5*a.length+5}},_init:function(a,b){this.canvas.width=a,this.canvas.height=b,this._gc.call("init",{width:a,height:b,font:[["sans-serif"],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})},_flush:function(){this._operations.length>0&&(this._gc.call("draw",{operations:this._operations}),this._operations=[])}};var f={lineWidth:{init:1,encode:function(a){if(a>0)return a;throw new Error(a)},decode:a},lineCap:{init:"butt",values:c(["butt","round","square"]),encode:b,decode:a},lineJoin:{init:"miter",values:c(["bevel","miter","round"]),encode:b,decode:a},fillStyle:{init:[0,0,0,255],encode:util.colorStringToArray,decode:util.colorArrayToString},strokeStyle:{init:[0,0,0,255],encode:util.colorStringToArray,decode:util.colorArrayToString},textAlign:{init:"start",values:c(["start","end","left","right","center"]),encode:b,decode:a},textBaseline:{init:"alphabetic",values:c(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:b,decode:a}}}(),function(){tabris.registerType("_ClientStore",{_type:"tabris.ClientStore"});var a;tabris.WebStorage=function(){a=tabris("_ClientStore")},tabris.WebStorage.prototype={setItem:function(b,c){if(!b)throw new TypeError("Key argument must be specified to execute 'setItem'");if(!c)throw new TypeError("Value argument must be specified to execute 'setItem'");"string"==typeof b&&"string"==typeof c&&a.call("add",{key:b,value:c})},getItem:function(b){return"string"==typeof b?a.call("get",{key:b}):void 0},removeItem:function(b){"string"==typeof b&&a.call("remove",{keys:[b]})},clear:function(){a.call("clear")}},tabris.StorageEvent=function(a){this.type=a},tabris.StorageEvent.prototype=util.extendPrototype(tabris.DOMEvent,{bubbles:!1,cancelable:!1,key:"",oldValue:null,newValue:null,url:"",storageArea:null}),window.Storage||(window.Storage=tabris.WebStorage,window.localStorage=new tabris.WebStorage)}(),function(){tabris.registerType("_HttpRequest",{_type:"tabris.HttpRequest",_listen:{StateChange:!0,DownloadProgress:!0,UploadProgress:!0},_checkProperty:!0});var a=["loadstart","readystatechange","load","loadend","progress","timeout","abort","error"],b=["progress","loadstart","load","loadend","timeout","abort","error"];tabris.XMLHttpRequest=function(){var a=c(this);e(this,a),f(this,a),g(this,a),i(this,a),h(this,a),j(this,a),m(this,a),n(this,a),o(this,a),k(this,a),d(a),this.open=p(this,a),this.send=q(this,a),this.abort=r(this,a),this.setRequestHeader=s(this,a),this.getResponseHeader=t(this,a),this.getAllResponseHeaders=u(this,a),tabris._addDOMEventTargetMethods(this),tabris._addDOMEventTargetMethods(a.uploadEventTarget)},tabris.XMLHttpRequest.prototype={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},tabris.XMLHttpRequestProgressEvent=function(a){this.type=a},tabris.XMLHttpRequestProgressEvent.prototype=util.extendPrototype(tabris.DOMEvent,{lengthComputable:!1,loaded:0,total:0});var c=function(a){var b={};return b.proxy=null,b.authorRequestHeaders={},b.uploadListeners={},b.uploadEventTarget={},b.timeout=0,b.status=0,b.statusText="",b.responseHeaders="",b.readyState=a.UNSENT,b.responseText="",b.withCredentials=!1,b.responseType="",b.sendInvoked=!1,b.isSynchronous=!1,b.error=!1,b.uploadComplete=!1,b},d=function(c){a.forEach(function(a){c["on"+a]=null}),b.forEach(function(a){c.uploadListeners["on"+a]=null})},e=function(a,b){Object.defineProperty(a,"upload",{get:function(){return b.uploadEventTarget},set:function(){}})},f=function(a,b){Object.defineProperty(a,"readyState",{get:function(){return b.readyState},set:function(){}})},g=function(a,b){Object.defineProperty(a,"timeout",{get:function(){return b.timeout},set:function(a){isNaN(a)||(b.timeout=Math.round(a))}})},h=function(a,b){Object.defineProperty(a,"responseText",{get:function(){if(null===b.responseText)return"";if("string"!=typeof b.responseText)throw new Error("IllegalStateError: responseText is not a string");return b.readyState!==a.LOADING&&b.readyState!==a.DONE?"":b.error?"":b.responseText},set:function(){}})},i=function(a,b){Object.defineProperty(a,"response",{get:function(){return b.readyState!==a.LOADING&&b.readyState!==a.DONE?"":b.error?"":b.responseText},set:function(){}})},j=function(a,b){Object.defineProperty(a,"responseType",{get:function(){return b.responseType},set:function(c){if(b.readyState===a.LOADING||b.readyState===a.DONE)throw new Error("InvalidStateError: state must not be 'LOADING' or 'DONE' when setting responseType");if(!(["arraybuffer","blob","document","json","text"].indexOf(c)<0)){if(["arraybuffer","blob","document","json"].indexOf(c)>-1)throw new Error("Only the 'text' response type is supported.");b.responseType=c}}})},k=function(c,d){a.forEach(function(a){l(a,c,d)}),b.forEach(function(a){l(a,d.uploadEventTarget,d.uploadListeners)})},l=function(a,b,c){var d="on"+a;Object.defineProperty(b,d,{get:function(){return c[d]},set:function(e){"function"==typeof e&&(b.removeEventListener(a,b[d]),c[d]=e,b.addEventListener(a,b[d]))}})},m=function(a,b){Object.defineProperty(a,"status",{get:function(){return[a.OPENED,a.UNSENT].indexOf(b.readyState)>-1?0:b.error?0:b.status},set:function(){}})},n=function(a,b){Object.defineProperty(a,"statusText",{get:function(){return[a.OPENED,a.UNSENT].indexOf(b.readyState)>-1?"":b.error?"":b.statusText},set:function(){}})},o=function(a,b){Object.defineProperty(a,"withCredentials",{set:function(c){if(b.readyState!==a.UNSENT&&b.readyState!==a.OPENED)throw new Error("InvalidStateError: state must be 'UNSENT' or 'OPENED' when setting withCredentials");if(b.sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to set 'withCredentials'");"boolean"==typeof c&&(b.withCredentials=c)},get:function(){return b.withCredentials}})},p=function(a,b){return function(c,d,e,f,g){var h={};y(c,d),h.source=d;var i=d.replace(/.*?:\/\//g,"");if(h.isRelative=!new RegExp("^(?:[a-z]+:)?//","i").test(d),h.userdata=i.substring(0,i.indexOf("@")),"undefined"==typeof e&&(e=!0,f=null,g=null),!e)throw new Error("Only asynchronous request supported.");h.isRelative&&f&&g&&(h.userdata=f+":"+g),b.requestMethod=c,b.requestUrl=h,b.isSynchronous=!e,b.authorRequestHeaders={},b.sendInvoked=!1,b.responseText=null,b.readyState!==a.OPENED&&(b.readyState=a.OPENED,J("readystatechange",a))}},q=function(a,b){return function(c){if(b.proxy=tabris.create("_HttpRequest"),b.proxy.on("StateChange",function(c){w(c,a,b)}),b.proxy.on("DownloadProgress",function(b){E("progress",a,b.lengthComputable,b.loaded,b.total)}),b.proxy.on("UploadProgress",function(b){E("progress",a.upload,b.lengthComputable,b.loaded,b.total)}),b.readyState!==a.OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'send'");if(b.sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to execute 'send'");["GET","HEAD"].indexOf(b.requestMethod)>-1&&(c=null),b.requestBody=c,b.error=b.uploadComplete=!1,c||(b.uploadComplete=!0),b.withCredentials&&b.requestUrl.userdata&&a.setRequestHeader("Authorization","Basic "+b.requestUrl.userdata),b.sendInvoked=!0,E("loadstart",a),b.uploadComplete||E("loadstart",a.upload),b.proxy.call("send",{url:b.requestUrl.source,method:b.requestMethod,timeout:a.timeout,headers:b.authorRequestHeaders,data:b.requestBody})}},r=function(a,b){return function(){b.proxy&&b.proxy.call("abort"),[a.UNSENT,a.OPENED].indexOf(b.readyState)>-1&&!b.sendInvoked||b.readyState===a.DONE||(J("readystatechange",a),b.uploadComplete||(b.uploadComplete=!0,F(a.upload)),F(a)),b.readyState=a.UNSENT}},s=function(a,b){return function(c,d){if(b.readyState!==a.OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'setRequestHeader'");if(b.sendInvoked)throw new Error("InvalidStateError: cannot set request header if 'send()' invoked and request not completed");if(!A(c))throw new TypeError("Invalid HTTP header name, failed to execute 'open'");if(!B(d))throw new TypeError("Invalid HTTP header value, failed to execute 'open'");if(C(c))throw new Error("Cannot set forbidden header '"+c+"'");b.authorRequestHeaders[c]=c in b.authorRequestHeaders?b.authorRequestHeaders[c]+", "+d:d}},t=function(a,b){return function(c){if([a.UNSENT,a.OPENED].indexOf(a.readyState)>-1)return null;if(b.error)return null;var d=["set-cookie","set-cookie2","status"];if(d.indexOf(c.toLowerCase())>-1)return null;for(var e in b.responseHeaders)if(e.toLowerCase()===c.toLowerCase())return b.responseHeaders[e];return null}},u=function(a,b){return function(){return[a.UNSENT,a.OPENED].indexOf(a.readyState)>-1?"":b.error?"":v(b.responseHeaders)}},v=function(a){var b=[],c=["set-cookie","set-cookie2","status"];for(var d in a)c.indexOf(d.toLowerCase())<0&&b.push(d+": "+a[d]);return b.join("\n")},w=function(a,b,c){switch(a.state){case"headers":c.readyState=b.HEADERS_RECEIVED,c.status=a.code,c.statusText=a.message,c.responseHeaders=a.headers,J("readystatechange",b),c.uploadComplete=!0,H(b.upload);break;case"loading":c.readyState=b.LOADING,J("readystatechange",b);break;case"finished":c.responseText=a.response,c.readyState=b.DONE,J("readystatechange",b),H(b),H(b.upload),c.proxy.dispose(),c.proxy=null;break;case"error":x("error",b,c);break;case"timeout":x("timeout",b,c);break;case"abort":x("abort",b,c)}},x=function(a,b,c){c.error=!0,c.readyState=b.DONE,J("readystatechange",b),G(a,b),c.uploadComplete||(c.uploadComplete=!0,G(a,b.upload))},y=function(a,b){if(!a)throw new TypeError("Method argument should be specified to execute 'open'");if(!b)throw new TypeError("URL argument should be specified to execute 'open'");z(a)},z=function(a){if(!A(a))throw new TypeError("Invalid HTTP method, failed to execute 'open'");var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"],c=a.toUpperCase();b.indexOf(c)>=0&&(a=c);var d=["CONNECT","TRACE","TRACK"];if(d.indexOf(a)>=0)throw new Error("SecurityError: '"+a+"' HTTP method is not secure, failed to execute 'open'")},A=function(a){var b=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"];return!(/[^\x21-\x7E]/.test(a)||b.indexOf(a)>=0)},B=function(a){return!(!/[*A-z\u00C0-\u00ff]+/g.test(a)||a.indexOf("\n")>-1||a.indexOf("\r")>-1)},C=function(a){return D.indexOf(a.toLowerCase())>-1},D=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],E=function(a,b,c,d,e){b.dispatchEvent(I(a,b,c,d,e))},F=function(a){E("progress",a),E("abort",a),E("loadend",a)},G=function(a,b){E("progress",b),E(a,b),E("loadend",b)},H=function(a){E("load",a),E("loadend",a)},I=function(a,b,c,d,e){var f=new tabris.XMLHttpRequestProgressEvent(a);return f.currentTarget=f.target=b,c&&(f.lengthComputable=c),d&&(f.loaded=d),e&&(f.total=e),f},J=function(a,b){var c=K(a,b);b.dispatchEvent(c)},K=function(a,b){var c=new tabris.DOMEvent(a);return c.currentTarget=c.target=b,c};"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=tabris.XMLHttpRequest,window.XMLHttpRequestProgressEvent=tabris.XMLHttpRequestProgressEvent)}();